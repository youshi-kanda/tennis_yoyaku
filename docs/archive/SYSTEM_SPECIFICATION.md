# ğŸ¾ ãƒ†ãƒ‹ã‚¹ã‚³ãƒ¼ãƒˆè‡ªå‹•äºˆç´„ã‚·ã‚¹ãƒ†ãƒ  - ã‚·ã‚¹ãƒ†ãƒ ä»•æ§˜æ›¸

**ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: v1.1  
**æœ€çµ‚æ›´æ–°æ—¥**: 2025å¹´12æœˆ1æ—¥  
**ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹**: æœ¬ç•ªç¨¼åƒä¸­

---

## ğŸ“Œ ã‚·ã‚¹ãƒ†ãƒ æ¦‚è¦

### ç›®çš„
å“å·åŒºãƒ»æ¸¯åŒºã®ãƒ†ãƒ‹ã‚¹ã‚³ãƒ¼ãƒˆäºˆç´„ã‚µã‚¤ãƒˆã‚’è‡ªå‹•ç›£è¦–ã—ã€ç©ºãæ ã‚’æ¤œçŸ¥ã—ã¦è‡ªå‹•äºˆç´„ã‚’è¡Œã†PWAï¼ˆProgressive Web Appï¼‰ã‚·ã‚¹ãƒ†ãƒ ã§ã™ã€‚

### ä¸»ãªç‰¹å¾´
- âš¡ **è‡ªå‹•ç›£è¦–**: 1åˆ†é–“éš”ã§ç©ºãçŠ¶æ³ã‚’ç›£è¦–
- ğŸ¯ **é›†ä¸­ç›£è¦–**: å“å·åŒºã®ã€Œå–ã€ãƒãƒ¼ã‚¯æ¤œçŸ¥æ™‚ã«1ç§’é–“éš”ã§ç›£è¦–
- ğŸ¤– **è‡ªå‹•äºˆç´„**: ç©ºãæ¤œçŸ¥æ™‚ã«å³åº§ã«äºˆç´„å®Ÿè¡Œ
- ğŸ“± **PWAå¯¾å¿œ**: ã‚¹ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒ³ã‚¢ãƒ—ãƒªã®ã‚ˆã†ã«ä½¿ç”¨å¯èƒ½
- ğŸ”” **ãƒ—ãƒƒã‚·ãƒ¥é€šçŸ¥**: ç©ºãæ¤œçŸ¥ãƒ»äºˆç´„æˆåŠŸæ™‚ã«é€šçŸ¥
- ğŸ” **ã‚»ã‚­ãƒ¥ã‚¢**: JWTèªè¨¼ã€ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰æš—å·åŒ–

### ğŸ’° æ–™é‡‘ä½“ç³»
- **Cloudflare Workers**: **æœ‰æ–™ãƒ—ãƒ©ãƒ³ $5/æœˆ** (å¿…é ˆ)
  - KVæ›¸ãè¾¼ã¿: ç„¡åˆ¶é™
  - ã‚µãƒ–ãƒªã‚¯ã‚¨ã‚¹ãƒˆ: 1,000/å®Ÿè¡Œ
  - CPUæ™‚é–“: 30ç§’/å®Ÿè¡Œ
- **Vercel**: ç„¡æ–™ãƒ—ãƒ©ãƒ³ (PWAãƒ›ã‚¹ãƒ†ã‚£ãƒ³ã‚°)

---

## ğŸ—ï¸ ã‚·ã‚¹ãƒ†ãƒ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

### å…¨ä½“æ§‹æˆå›³

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     ã‚¨ãƒ³ãƒ‰ãƒ¦ãƒ¼ã‚¶ãƒ¼                            â”‚
â”‚              (ã‚¹ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒ³/PC/ã‚¿ãƒ–ãƒ¬ãƒƒãƒˆ)                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚ HTTPS
                     â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  PWAã‚¢ãƒ—ãƒª (Vercel)                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  Next.js 15 + TypeScript + Tailwind CSS            â”‚    â”‚
â”‚  â”‚  - ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ (ç›£è¦–çŠ¶æ³è¡¨ç¤º)                      â”‚    â”‚
â”‚  â”‚  - ç›£è¦–è¨­å®š (æœŸé–“ãƒ»æ™‚é–“å¸¯ãƒ»æ–½è¨­é¸æŠ)                  â”‚    â”‚
â”‚  â”‚  - äºˆç´„å±¥æ­´ (æˆåŠŸ/å¤±æ•—å±¥æ­´)                          â”‚    â”‚
â”‚  â”‚  - è¨­å®šç”»é¢ (èªè¨¼æƒ…å ±ç®¡ç†)                           â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚ REST API (JWTèªè¨¼)
                     â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          Cloudflare Workers (ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰API)                 â”‚
â”‚                    æœ‰æ–™ãƒ—ãƒ©ãƒ³ $5/æœˆ                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  Workers Runtime                                    â”‚    â”‚
â”‚  â”‚  - REST APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ                            â”‚    â”‚
â”‚  â”‚  - JWTèªè¨¼ãƒ»èªå¯                                     â”‚    â”‚
â”‚  â”‚  - Cronã‚¸ãƒ§ãƒ– (1åˆ†é–“éš”)                              â”‚    â”‚
â”‚  â”‚  - ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°å‡¦ç†                                 â”‚    â”‚
â”‚  â”‚  - è‡ªå‹•äºˆç´„å‡¦ç†                                      â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  KV Storage (ãƒ‡ãƒ¼ã‚¿æ°¸ç¶šåŒ–)                           â”‚    â”‚
â”‚  â”‚  - USERS: ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ãƒ»è¨­å®š                          â”‚    â”‚
â”‚  â”‚  - SESSIONS: ãƒ­ã‚°ã‚¤ãƒ³ã‚»ãƒƒã‚·ãƒ§ãƒ³                       â”‚    â”‚
â”‚  â”‚  - MONITORING: ç›£è¦–è¨­å®š                              â”‚    â”‚
â”‚  â”‚  - RESERVATIONS: äºˆç´„å±¥æ­´                            â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚ HTTP(S) ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°
                     â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   è‡ªæ²»ä½“äºˆç´„ã‚µã‚¤ãƒˆ                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚  å“å·åŒºäºˆç´„ã‚·ã‚¹ãƒ†ãƒ    â”‚  â”‚  æ¸¯åŒºäºˆç´„ã‚·ã‚¹ãƒ†ãƒ      â”‚        â”‚
â”‚  â”‚  (cm9.eprs.jp)       â”‚  â”‚  (web101.rsv.ws-scs) â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

#### ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰
| æŠ€è¡“ | ãƒãƒ¼ã‚¸ãƒ§ãƒ³ | ç”¨é€” |
|------|-----------|------|
| Next.js | 16.0.3 | Reactãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ (App Router) |
| React | 19.2.0 | UIãƒ©ã‚¤ãƒ–ãƒ©ãƒª |
| TypeScript | 5.x | å‹å®‰å…¨ãªé–‹ç™º |
| Tailwind CSS | 4.x | ã‚¹ã‚¿ã‚¤ãƒªãƒ³ã‚° |
| Zustand | 5.0.8 | çŠ¶æ…‹ç®¡ç† (èªè¨¼çŠ¶æ…‹) |
| Axios | 1.13.2 | HTTPã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ |
| React Calendar | 6.0.0 | ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼UI |
| date-fns | 4.1.0 | æ—¥ä»˜æ“ä½œ |

#### ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰
| æŠ€è¡“ | ãƒãƒ¼ã‚¸ãƒ§ãƒ³ | ç”¨é€” |
|------|-----------|------|
| Cloudflare Workers | - | ã‚µãƒ¼ãƒãƒ¼ãƒ¬ã‚¹å®Ÿè¡Œç’°å¢ƒ |
| Workers KV | - | NoSQLãƒ‡ãƒ¼ã‚¿ã‚¹ãƒˆã‚¢ |
| Web Crypto API | - | JWTç½²åãƒ»ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰æš—å·åŒ– |
| Wrangler | 3.94.0 | é–‹ç™ºãƒ»ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ„ãƒ¼ãƒ« |

#### ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ»ãƒ›ã‚¹ãƒ†ã‚£ãƒ³ã‚°
| ã‚µãƒ¼ãƒ“ã‚¹ | ç”¨é€” | æ–™é‡‘ |
|---------|------|------|
| Vercel | PWAãƒ›ã‚¹ãƒ†ã‚£ãƒ³ã‚° | ç„¡æ–™ |
| Cloudflare Workers | ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰API | $5/æœˆ (æœ‰æ–™ãƒ—ãƒ©ãƒ³) |
| Cloudflare KV | ãƒ‡ãƒ¼ã‚¿ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ | $5/æœˆã«å«ã¾ã‚Œã‚‹ |

---

## ğŸ¯ ä¸»è¦æ©Ÿèƒ½

### 1. ãƒ¦ãƒ¼ã‚¶ãƒ¼èªè¨¼ãƒ»èªå¯

#### èªè¨¼æ–¹å¼
- **JWT (JSON Web Token)** ãƒ™ãƒ¼ã‚¹ã®èªè¨¼
- ãƒˆãƒ¼ã‚¯ãƒ³æœ‰åŠ¹æœŸé™: 7æ—¥é–“
- ç½²åã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ : HS256

#### ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ­ãƒ¼ãƒ«
| ãƒ­ãƒ¼ãƒ« | æ¨©é™ |
|--------|------|
| **user** | è‡ªåˆ†ã®ç›£è¦–è¨­å®šãƒ»å±¥æ­´ã®ç®¡ç† |
| **admin** | å…¨ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ç®¡ç†ã€ã‚·ã‚¹ãƒ†ãƒ çµ±è¨ˆé–²è¦§ |

#### ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£
- bcryptç›¸å½“ã®å¼·åº¦ã§ãƒãƒƒã‚·ãƒ¥åŒ–
- è‡ªæ²»ä½“ã‚µã‚¤ãƒˆã®ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã¯AESæš—å·åŒ–ã—ã¦ä¿å­˜
- æš—å·åŒ–ã‚­ãƒ¼: ç’°å¢ƒå¤‰æ•°ã§ç®¡ç†

### 2. ç›£è¦–è¨­å®š (MonitoringTarget)

#### ğŸ“… æ—¥ä»˜ãƒ¢ãƒ¼ãƒ‰
```typescript
dateMode: 'single' | 'range' | 'continuous'
```

| ãƒ¢ãƒ¼ãƒ‰ | èª¬æ˜ | ä½¿ç”¨ä¾‹ |
|--------|------|--------|
| **single** | ç‰¹å®šã®1æ—¥ã®ã¿ç›£è¦– | 12æœˆ15æ—¥ã ã‘ãƒã‚§ãƒƒã‚¯ |
| **range** | é–‹å§‹æ—¥ã€œçµ‚äº†æ—¥ã®ç¯„å›²ã‚’ç›£è¦– | 12æœˆ1æ—¥ã€œ12æœˆ31æ—¥ã‚’ãƒã‚§ãƒƒã‚¯ |
| **continuous** | æ˜æ—¥ã‹ã‚‰äºˆç´„å¯èƒ½æœŸé–“ã®æœ€å¾Œã¾ã§è‡ªå‹•ç›£è¦– | ã‚·ã‚¹ãƒ†ãƒ ãŒè‡ªå‹•çš„ã«ç¯„å›²ã‚’æ›´æ–° |

#### ğŸ• æ™‚é–“å¸¯è¨­å®š
```typescript
timeSlots: string[]  // è¤‡æ•°æŒ‡å®šå¯èƒ½
```

**ä¾‹**:
```json
{
  "timeSlots": ["09:00-11:00", "11:00-13:00", "15:00-17:00"]
}
```

#### ğŸ“† æ›œæ—¥ãƒ•ã‚£ãƒ«ã‚¿
```typescript
selectedWeekdays?: number[]  // 0=æ—¥, 1=æœˆ, ..., 6=åœŸ
```

**ä¾‹**:
```json
{
  "selectedWeekdays": [0, 6]  // æ—¥æ›œãƒ»åœŸæ›œã®ã¿ç›£è¦–
}
```

#### ğŸŒ ç¥æ—¥ã®æ‰±ã„
```typescript
includeHolidays?: boolean | 'only'
```

| å€¤ | å‹•ä½œ |
|----|------|
| `true` | ç¥æ—¥ã‚‚å«ã‚ã¦ç›£è¦– (ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ) |
| `false` | ç¥æ—¥ã‚’é™¤å¤–ã—ã¦ç›£è¦– |
| `'only'` | ç¥æ—¥ã®ã¿ç›£è¦– |

#### â­ å„ªå…ˆåº¦
```typescript
priority?: number  // 1-5 (5ãŒæœ€å„ªå…ˆã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: 3)
```

è¤‡æ•°ã®ç©ºãæ ãŒåŒæ™‚ã«è¦‹ã¤ã‹ã£ãŸå ´åˆã€å„ªå…ˆåº¦ã®é«˜ã„é †ã«äºˆç´„ã‚’å®Ÿè¡Œã—ã¾ã™ã€‚

#### ğŸ‘¥ åˆ©ç”¨äººæ•°
```typescript
applicantCount?: number
```

| è‡ªæ²»ä½“ | ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ | ç¯„å›² |
|--------|------------|------|
| å“å·åŒº | 2äºº | 1-10äºº |
| æ¸¯åŒº | 4äºº | 1-10äºº |

#### ğŸ¤– è‡ªå‹•äºˆç´„è¨­å®š
```typescript
autoReserve: boolean
```

- `true`: ç©ºãæ¤œçŸ¥æ™‚ã«è‡ªå‹•çš„ã«äºˆç´„å®Ÿè¡Œ
- `false`: é€šçŸ¥ã®ã¿ (æ‰‹å‹•äºˆç´„ãŒå¿…è¦)

### 3. ç›£è¦–ãƒ»äºˆç´„ãƒ•ãƒ­ãƒ¼

#### é€šå¸¸ç›£è¦– (1åˆ†é–“éš”)

```mermaid
graph TD
    A[Cronå®Ÿè¡Œ 1åˆ†ã”ã¨] --> B[å…¨ç›£è¦–è¨­å®šå–å¾—]
    B --> C[å„ªå…ˆåº¦é †ã«ã‚½ãƒ¼ãƒˆ]
    C --> D[å„ã‚¿ãƒ¼ã‚²ãƒƒãƒˆã‚’ãƒã‚§ãƒƒã‚¯]
    D --> E{ç©ºãæ æ¤œçŸ¥?}
    E -->|Ã— æº€å®¤| F[æ¬¡ã®ã‚¿ãƒ¼ã‚²ãƒƒãƒˆ]
    E -->|â—‹ ç©ºã| G[autoReserve?]
    E -->|å– ã‚­ãƒ£ãƒ³ã‚»ãƒ«å¾…ã¡| H[é›†ä¸­ç›£è¦–é–‹å§‹]
    G -->|true| I[è‡ªå‹•äºˆç´„å®Ÿè¡Œ]
    G -->|false| J[é€šçŸ¥ã®ã¿]
    I --> K[äºˆç´„æˆåŠŸ/å¤±æ•—]
    K --> L[å±¥æ­´ä¿å­˜]
    K --> M[ãƒ—ãƒƒã‚·ãƒ¥é€šçŸ¥]
    H --> N[10åˆ†å˜ä½ã®é›†ä¸­ãƒã‚§ãƒƒã‚¯]
```

#### é›†ä¸­ç›£è¦–ãƒ¢ãƒ¼ãƒ‰ (å“å·åŒºã®ã¿)

å“å·åŒºã§ã¯ã€Œå–ã€ãƒãƒ¼ã‚¯ = ã‚­ãƒ£ãƒ³ã‚»ãƒ«å¾…ã¡çŠ¶æ…‹ãŒå­˜åœ¨ã—ã¾ã™ã€‚

**ãƒˆãƒªã‚¬ãƒ¼æ¡ä»¶**:
- é€šå¸¸ç›£è¦–ã§ã€Œå–ã€ãƒãƒ¼ã‚¯ã‚’æ¤œçŸ¥

**å‹•ä½œ**:
1. **10åˆ†å˜ä½ã®ã‚¿ã‚¤ãƒŸãƒ³ã‚°** (10:10, 10:20, 10:30...)
2. ãã® **å‰å¾Œ15ç§’é–“** ã‚’ **1ç§’é–“éš”** ã§ãƒã‚§ãƒƒã‚¯
3. ä¾‹: 10:10ã®å ´åˆã€09:55ã€œ10:25ã‚’1ç§’é–“éš”ã§ç›£è¦–

**çµ‚äº†æ¡ä»¶**:
- âœ… äºˆç´„æˆåŠŸ
- âœ… ã€Œå–ã€ãƒãƒ¼ã‚¯æ¶ˆå¤± (ä»–ã®äººãŒäºˆç´„)
- âœ… äºˆç´„æ™‚åˆ»åˆ°é” (éå»ã®æ—¥æ™‚)

**ãƒªã‚½ãƒ¼ã‚¹å‰Šæ¸›åŠ¹æœ**:
- å¾“æ¥: 10åˆ†é–“é€£ç¶šç›£è¦– (600å›ãƒã‚§ãƒƒã‚¯)
- æœ€é©åŒ–å¾Œ: 30ç§’é–“ã®ã¿ç›£è¦– (30å›ãƒã‚§ãƒƒã‚¯)
- **95%ã®ãƒªã‚½ãƒ¼ã‚¹å‰Šæ¸›**

#### 5:00ä¸€æ–‰å‡¦ç† (æ·±å¤œå¾…æ©Ÿæ ã®è‡ªå‹•äºˆç´„)

æ¯æ—¥5:00ã«å®Ÿè¡Œã•ã‚Œã‚‹ç‰¹åˆ¥ãªå‡¦ç†:

```
1. å…¨ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãªç›£è¦–è¨­å®šã‚’å–å¾—
2. å„ªå…ˆåº¦é †ã«ã‚½ãƒ¼ãƒˆ
3. å„ã‚¿ãƒ¼ã‚²ãƒƒãƒˆã®ç©ºãçŠ¶æ³ã‚’ä¸€æ–‰ãƒã‚§ãƒƒã‚¯
4. ç©ºããŒã‚ã‚Œã°è‡ªå‹•äºˆç´„å®Ÿè¡Œ
```

**ç›®çš„**: æ·±å¤œ0:00ã€œ5:00ã®é–“ã«ç™ºç”Ÿã—ãŸç©ºãæ ã‚’ç¢ºå®Ÿã«å–å¾—

### 4. ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°å‡¦ç†

#### å“å·åŒºã‚µã‚¤ãƒˆ

**ãƒ™ãƒ¼ã‚¹URL**: `https://www.cm9.eprs.jp/shinagawa/web`

**ãƒ­ã‚°ã‚¤ãƒ³æ‰‹é †**:
```typescript
1. GET /rsvWTransUserLoginAction.do
   â†’ JSESSIONIDå–å¾—
   
2. POST /rsvWUserAttestationLoginAction.do
   body: {
     'rsvWTransUserLoginForm.usrId': userId,
     'rsvWTransUserLoginForm.usrPswd': password
   }
   â†’ ã‚»ãƒƒã‚·ãƒ§ãƒ³ç¢ºç«‹
```

**ç©ºãçŠ¶æ³ãƒã‚§ãƒƒã‚¯**:
```typescript
GET /rsvWOpeInstSrchVacantAction.do?
  rsvWOpeInstSrchVacantForm.instCd={facilityId}&
  rsvWOpeInstSrchVacantForm.srchDate={date}
```

**ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹åˆ¤å®š**:
| ç”»åƒ | altå±æ€§ | ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ | æ„å‘³ |
|------|---------|-----------|------|
| calendar_available | "ç©ºã" | â—‹ | äºˆç´„å¯èƒ½ |
| calendar_delete | "å–æ¶ˆå‡¦ç†ä¸­" | å– | ã‚­ãƒ£ãƒ³ã‚»ãƒ«å¾…ã¡ |
| calendar_full | "äºˆç´„ã‚ã‚Š" | Ã— | æº€å®¤ |
| calendar_few-available | "ä¸€éƒ¨ç©ºã" | â–³ | ä¸€éƒ¨ç©ºã |

**äºˆç´„å®Ÿè¡Œæ‰‹é †**:
```typescript
1. GET /rsvWOpeReservedApplyAction.do
   â†’ äºˆç´„ç”»é¢è¡¨ç¤º

2. POST /rsvWInstUseruleRsvApplyAction.do
   body: { ruleFg: '1' }  // åˆ©ç”¨è¦ç´„ã«åŒæ„

3. POST /rsvWOpeReservedConfirmAction.do
   body: {
     instNo, dateNo, timeNo,
     usrNum: applicantCount,  // åˆ©ç”¨äººæ•°
     eventName: ''
   }

4. POST /rsvWOpeReservedCompleteAction.do
   â†’ äºˆç´„ç¢ºå®š
```

#### æ¸¯åŒºã‚µã‚¤ãƒˆ

**ãƒ™ãƒ¼ã‚¹URL**: `https://web101.rsv.ws-scs.jp/web`

**ãƒ­ã‚°ã‚¤ãƒ³æ‰‹é †**:
```typescript
1. POST /rsvWUserAttestationLoginAction.do
   body: {
     userId: username,
     password: password
   }
   â†’ JSESSIONIDå–å¾—
```

**ç©ºãçŠ¶æ³ãƒã‚§ãƒƒã‚¯**:
```typescript
GET /rsvWOpeInstSrchVacantAction.do?
  rsvWOpeInstSrchVacantForm.instCd={facilityId}&
  rsvWOpeInstSrchVacantForm.srchDate={date}
```

**ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹åˆ¤å®š**:
| è¡¨ç¤º | ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ | æ„å‘³ |
|------|-----------|------|
| â—‹ | â—‹ | äºˆç´„å¯èƒ½ |
| Ã— | Ã— | æº€å®¤ |

**æ³¨æ„**: æ¸¯åŒºã¯ã€Œå–ã€ãƒãƒ¼ã‚¯ (ã‚­ãƒ£ãƒ³ã‚»ãƒ«å¾…ã¡) ãŒå­˜åœ¨ã—ã¾ã›ã‚“ã€‚

### 5. äºˆç´„å¯èƒ½æœŸé–“ã®è‡ªå‹•æ¤œå‡º

ã‚·ã‚¹ãƒ†ãƒ ã¯ä»¥ä¸‹ã®å„ªå…ˆé †ä½ã§äºˆç´„å¯èƒ½æœŸé–“ã‚’åˆ¤å®šã—ã¾ã™:

```typescript
1. HTMLè‡ªå‹•æŠ½å‡º (æœ€å„ªå…ˆ)
   - ãƒ˜ãƒ«ãƒ—ãƒšãƒ¼ã‚¸ã‹ã‚‰ã€Œâ—‹ãƒ¶æœˆå…ˆã¾ã§ã€ã‚’æ¤œå‡º
   - ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼UIã®max-dateå±æ€§ã‚’è§£æ
   â†’ KVã«24æ™‚é–“ã‚­ãƒ£ãƒƒã‚·ãƒ¥

2. KVã‚­ãƒ£ãƒƒã‚·ãƒ¥åˆ©ç”¨ (ã‚»ã‚«ãƒ³ãƒ€ãƒª)
   - 24æ™‚é–“ä»¥å†…ã«å–å¾—ã—ãŸæœŸé–“æƒ…å ±ã‚’å†åˆ©ç”¨
   - ã‚µãƒ–ãƒªã‚¯ã‚¨ã‚¹ãƒˆå‰Šæ¸›

3. ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ (ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯)
   - å“å·åŒº: 30æ—¥
   - æ¸¯åŒº: 60æ—¥
```

**KVã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚­ãƒ¼**:
- `reservation_period:shinagawa`
- `reservation_period:minato`

**ãƒ‡ãƒ¼ã‚¿æ§‹é€ **:
```typescript
interface ReservationPeriodInfo {
  maxDaysAhead: number;  // äºˆç´„å¯èƒ½æ—¥æ•°
  source: 'html_extraction' | 'kv_cache' | 'fallback';
  detectedAt: number;    // æ¤œå‡ºæ™‚åˆ» (ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—)
  expiresAt: number;     // ã‚­ãƒ£ãƒƒã‚·ãƒ¥æœ‰åŠ¹æœŸé™
}
```

### 6. ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†

#### ã‚»ãƒƒã‚·ãƒ§ãƒ³ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«

```typescript
interface SessionData {
  sessionId: string;      // JSESSIONID
  site: 'shinagawa' | 'minato';
  loginTime: number;      // ãƒ­ã‚°ã‚¤ãƒ³æ™‚åˆ»
  lastUsed: number;       // æœ€çµ‚ä½¿ç”¨æ™‚åˆ»
  isValid: boolean;       // æœ‰åŠ¹ãƒ•ãƒ©ã‚°
  userId: string;         // ãƒ¦ãƒ¼ã‚¶ãƒ¼ID
}
```

**ä¿å­˜å ´æ‰€**:
1. **KV Storage**: 24æ™‚é–“ä¿å­˜
   - Key: `session:{userId}:{site}`
2. **ãƒ¡ãƒ¢ãƒªã‚­ãƒ£ãƒƒã‚·ãƒ¥**: 5åˆ†é–“ä¿å­˜
   - å†åˆ©ç”¨ã«ã‚ˆã‚‹KVèª­ã¿å–ã‚Šå‰Šæ¸›

**ã‚»ãƒƒã‚·ãƒ§ãƒ³ãƒªã‚»ãƒƒãƒˆ**:
- æ·±å¤œ3:15ã«å…¨ã‚»ãƒƒã‚·ãƒ§ãƒ³è‡ªå‹•å‰Šé™¤ (å“å·åŒºã®åˆ¶ç´„)

#### å“å·åŒºã®æ™‚é–“åˆ¶é™

å“å·åŒºã®ã‚·ã‚¹ãƒ†ãƒ ã«ã¯æ·±å¤œæ™‚é–“å¸¯ã®åˆ¶ç´„ãŒã‚ã‚Šã¾ã™:

| æ™‚é–“å¸¯ | ãƒ­ã‚°ã‚¤ãƒ³ | äºˆç´„ | å‚™è€ƒ |
|--------|---------|------|------|
| 00:00-03:15 | âŒ | âœ… | æ—¢å­˜ã‚»ãƒƒã‚·ãƒ§ãƒ³ã®ã¿äºˆç´„å¯ |
| 03:15-05:00 | âŒ | âŒ | å®Œå…¨åœæ­¢ |
| 05:00-24:00 | âœ… | âœ… | é€šå¸¸é‹ç”¨ |

**03:15ã®å‡¦ç†**:
```typescript
// å…¨ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚’å‰Šé™¤
await resetAllSessions(env);
```

---

## ğŸ“Š ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«

### 1. User (ãƒ¦ãƒ¼ã‚¶ãƒ¼)

**ä¿å­˜å ´æ‰€**: `USERS` KV Namespace

**ã‚­ãƒ¼æ§‹é€ **:
- `user:{email}` â†’ ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±
- `user:id:{userId}` â†’ ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ (é€†å¼•ã)

```typescript
interface User {
  id: string;              // UUID
  email: string;           // ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ (ãƒ­ã‚°ã‚¤ãƒ³ID)
  password: string;        // bcryptãƒãƒƒã‚·ãƒ¥
  role: 'user' | 'admin';  // ãƒ­ãƒ¼ãƒ«
  createdAt: number;       // ä½œæˆæ—¥æ™‚ (timestamp)
  updatedAt?: number;      // æ›´æ–°æ—¥æ™‚
}
```

### 2. UserSettings (ãƒ¦ãƒ¼ã‚¶ãƒ¼è¨­å®š)

**ä¿å­˜å ´æ‰€**: `USERS` KV Namespace

**ã‚­ãƒ¼**: `settings:{userId}`

```typescript
interface UserSettings {
  shinagawa?: {
    username: string;        // å“å·åŒºãƒ­ã‚°ã‚¤ãƒ³ID
    password: string;        // AESæš—å·åŒ–ã•ã‚ŒãŸãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰
    sessionId?: string;      // ä¿å­˜ã•ã‚ŒãŸã‚»ãƒƒã‚·ãƒ§ãƒ³ID (ã‚ªãƒ—ã‚·ãƒ§ãƒ³)
    lastUpdated?: number;
    expiresAt?: number;
  };
  minato?: {
    username: string;        // æ¸¯åŒºãƒ­ã‚°ã‚¤ãƒ³ID
    password: string;        // AESæš—å·åŒ–ã•ã‚ŒãŸãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰
    sessionId?: string;      // ä¿å­˜ã•ã‚ŒãŸã‚»ãƒƒã‚·ãƒ§ãƒ³ID (ã‚ªãƒ—ã‚·ãƒ§ãƒ³)
    lastUpdated?: number;
    expiresAt?: number;
  };
  reservationLimits?: {
    perWeek?: number;        // é€±ã‚ãŸã‚Šã®äºˆç´„ä¸Šé™
    perMonth?: number;       // æœˆã‚ãŸã‚Šã®äºˆç´„ä¸Šé™
  };
}
```

### 3. MonitoringTarget (ç›£è¦–è¨­å®š)

**ä¿å­˜å ´æ‰€**: `MONITORING` KV Namespace

**æ–°å½¢å¼** (v2.0ä»¥é™):
- **ã‚­ãƒ¼**: `MONITORING:{userId}`
- **å€¤**: `UserMonitoringState` (é…åˆ—ç®¡ç†)

```typescript
interface UserMonitoringState {
  targets: MonitoringTarget[];  // ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®å…¨ç›£è¦–è¨­å®š
  updatedAt: number;            // æœ€çµ‚æ›´æ–°æ™‚åˆ»
  version: number;              // ãƒ‡ãƒ¼ã‚¿ãƒãƒ¼ã‚¸ãƒ§ãƒ³
}

interface MonitoringTarget {
  // åŸºæœ¬æƒ…å ±
  id: string;                   // UUID
  userId: string;               // ãƒ¦ãƒ¼ã‚¶ãƒ¼ID
  site: 'shinagawa' | 'minato'; // è‡ªæ²»ä½“
  facilityId: string;           // æ–½è¨­ID (ä¾‹: "1010100201")
  facilityName: string;         // æ–½è¨­å
  
  // æ—¥ä»˜è¨­å®š
  date: string;                 // å˜ä¸€æ—¥ä»˜ (å¾Œæ–¹äº’æ›æ€§)
  dateMode?: 'single' | 'range' | 'continuous';
  startDate?: string;           // æœŸé–“é–‹å§‹æ—¥ (YYYY-MM-DD)
  endDate?: string;             // æœŸé–“çµ‚äº†æ—¥
  
  // æ™‚é–“å¸¯è¨­å®š
  timeSlot: string;             // å˜ä¸€æ™‚é–“å¸¯ (å¾Œæ–¹äº’æ›æ€§)
  timeSlots?: string[];         // è¤‡æ•°æ™‚é–“å¸¯ (ä¾‹: ["09:00-11:00", "15:00-17:00"])
  
  // ãƒ•ã‚£ãƒ«ã‚¿è¨­å®š
  selectedWeekdays?: number[];  // ç›£è¦–æ›œæ—¥ (0=æ—¥, 1=æœˆ, ..., 6=åœŸ)
  includeHolidays?: boolean | 'only';  // ç¥æ—¥ã®æ‰±ã„
  
  // å„ªå…ˆåº¦ãƒ»è‡ªå‹•äºˆç´„
  priority?: number;            // 1-5 (ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: 3)
  autoReserve: boolean;         // è‡ªå‹•äºˆç´„ãƒ•ãƒ©ã‚°
  reservationStrategy?: 'all' | 'priority_first';
  applicantCount?: number;      // åˆ©ç”¨äººæ•°
  
  // ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹
  status: 'active' | 'pending' | 'completed' | 'failed' | 'detected' | 'paused';
  lastCheck?: number;           // æœ€çµ‚ãƒã‚§ãƒƒã‚¯æ™‚åˆ»
  lastStatus?: 'Ã—' | 'â—‹' | 'å–';  // æœ€å¾Œã«ç¢ºèªã—ãŸã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹
  detectedStatus?: 'Ã—' | 'å–' | 'â—‹';  // æ¤œçŸ¥ã—ãŸã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹
  
  // é›†ä¸­ç›£è¦–ç”¨
  intensiveMonitoringUntil?: number;     // é›†ä¸­ç›£è¦–çµ‚äº†æ™‚åˆ» (å»ƒæ­¢äºˆå®š)
  nextIntensiveCheckTime?: number;       // æ¬¡ã®é›†ä¸­ç›£è¦–æ™‚åˆ»
  intensiveMonitoringDate?: string;      // é›†ä¸­ç›£è¦–å¯¾è±¡æ—¥ä»˜
  intensiveMonitoringTimeSlot?: string;  // é›†ä¸­ç›£è¦–å¯¾è±¡æ™‚é–“å¸¯
  
  // ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—
  createdAt: number;            // ä½œæˆæ—¥æ™‚
  updatedAt?: number;           // æ›´æ–°æ—¥æ™‚
  detectedAt?: number;          // ç©ºãæ¤œçŸ¥æ™‚åˆ»
  failedAt?: number;            // äºˆç´„å¤±æ•—æ™‚åˆ»
  failureReason?: string;       // äºˆç´„å¤±æ•—ç†ç”±
}
```

### 4. ReservationHistory (äºˆç´„å±¥æ­´)

**ä¿å­˜å ´æ‰€**: `RESERVATIONS` KV Namespace

**ã‚­ãƒ¼**: `history:{userId}`

**å€¤**: é…åˆ—ç®¡ç† `ReservationHistory[]`

```typescript
interface ReservationHistory {
  id: string;                   // UUID
  userId: string;               // ãƒ¦ãƒ¼ã‚¶ãƒ¼ID
  targetId: string;             // ç›£è¦–è¨­å®šID
  site: 'shinagawa' | 'minato'; // è‡ªæ²»ä½“
  facilityId: string;           // æ–½è¨­ID
  facilityName: string;         // æ–½è¨­å
  date: string;                 // äºˆç´„æ—¥ (YYYY-MM-DD)
  timeSlot: string;             // æ™‚é–“å¸¯
  status: 'success' | 'failed' | 'cancelled';  // ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹
  message?: string;             // ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ (äºˆç´„ç•ªå·ãªã©)
  createdAt: number;            // ä½œæˆæ—¥æ™‚
}
```

### 5. SessionData (ã‚»ãƒƒã‚·ãƒ§ãƒ³)

**ä¿å­˜å ´æ‰€**: `SESSIONS` KV Namespace

**ã‚­ãƒ¼**: `session:{userId}:{site}`

```typescript
interface SessionData {
  sessionId: string;            // JSESSIONID
  site: 'shinagawa' | 'minato'; // è‡ªæ²»ä½“
  loginTime: number;            // ãƒ­ã‚°ã‚¤ãƒ³æ™‚åˆ»
  lastUsed: number;             // æœ€çµ‚ä½¿ç”¨æ™‚åˆ»
  isValid: boolean;             // æœ‰åŠ¹ãƒ•ãƒ©ã‚°
  userId: string;               // ãƒ¦ãƒ¼ã‚¶ãƒ¼ID
}
```

**TTL**: 24æ™‚é–“ (KVè‡ªå‹•å‰Šé™¤)

---

## ğŸ”„ APIä»•æ§˜

### ãƒ™ãƒ¼ã‚¹URL

- **æœ¬ç•ªç’°å¢ƒ**: `https://tennis-yoyaku-api.kanda02-1203.workers.dev`
- **é–‹ç™ºç’°å¢ƒ**: `http://localhost:8787`

### èªè¨¼

**æ–¹å¼**: Bearer Token (JWT)

**ãƒ˜ãƒƒãƒ€ãƒ¼**:
```http
Authorization: Bearer <JWT_TOKEN>
```

### ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆä¸€è¦§

#### èªè¨¼API

##### POST /api/auth/register
ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ²

**ãƒªã‚¯ã‚¨ã‚¹ãƒˆ**:
```json
{
  "email": "user@example.com",
  "password": "password123",
  "adminKey": "tennis_admin_2025"  // ç®¡ç†è€…ç™»éŒ²æ™‚ã®ã¿
}
```

**ãƒ¬ã‚¹ãƒãƒ³ã‚¹**:
```json
{
  "success": true,
  "data": {
    "user": {
      "id": "uuid",
      "email": "user@example.com",
      "role": "user",
      "createdAt": 1701234567890
    },
    "token": "eyJhbGciOiJIUzI1NiIs..."
  }
}
```

##### POST /api/auth/login
ãƒ­ã‚°ã‚¤ãƒ³

**ãƒªã‚¯ã‚¨ã‚¹ãƒˆ**:
```json
{
  "email": "user@example.com",
  "password": "password123"
}
```

**ãƒ¬ã‚¹ãƒãƒ³ã‚¹**:
```json
{
  "success": true,
  "data": {
    "user": {
      "id": "uuid",
      "email": "user@example.com",
      "role": "user",
      "createdAt": 1701234567890
    },
    "token": "eyJhbGciOiJIUzI1NiIs..."
  }
}
```

#### ç›£è¦–API

##### GET /api/monitoring/list
ç›£è¦–ãƒªã‚¹ãƒˆå–å¾—

**ãƒ¬ã‚¹ãƒãƒ³ã‚¹**:
```json
{
  "success": true,
  "data": [
    {
      "id": "uuid",
      "site": "shinagawa",
      "facilityName": "ã—ãªãŒã‚åŒºæ°‘å…¬åœ’ãƒ†ãƒ‹ã‚¹ã‚³ãƒ¼ãƒˆ",
      "dateMode": "range",
      "startDate": "2025-12-01",
      "endDate": "2025-12-31",
      "timeSlots": ["09:00-11:00", "15:00-17:00"],
      "selectedWeekdays": [0, 6],
      "priority": 5,
      "autoReserve": true,
      "status": "active",
      "createdAt": 1701234567890
    }
  ]
}
```

##### POST /api/monitoring/create
ç›£è¦–è¨­å®šä½œæˆ

**ãƒªã‚¯ã‚¨ã‚¹ãƒˆ**:
```json
{
  "site": "shinagawa",
  "facilityId": "1010100201",
  "facilityName": "ã—ãªãŒã‚åŒºæ°‘å…¬åœ’ãƒ†ãƒ‹ã‚¹ã‚³ãƒ¼ãƒˆ",
  "dateMode": "range",
  "startDate": "2025-12-01",
  "endDate": "2025-12-31",
  "timeSlots": ["09:00-11:00", "15:00-17:00"],
  "selectedWeekdays": [0, 6],
  "priority": 5,
  "includeHolidays": true,
  "autoReserve": true,
  "applicantCount": 2
}
```

##### POST /api/monitoring/create-batch
ç›£è¦–è¨­å®šä¸€æ‹¬ä½œæˆ

**ãƒªã‚¯ã‚¨ã‚¹ãƒˆ**:
```json
{
  "targets": [
    {
      "site": "shinagawa",
      "facilityId": "1010100201",
      "facilityName": "ã—ãªãŒã‚åŒºæ°‘å…¬åœ’ãƒ†ãƒ‹ã‚¹ã‚³ãƒ¼ãƒˆ",
      "dateMode": "continuous",
      "timeSlots": ["09:00-11:00"],
      "autoReserve": true
    },
    // ... ä»–ã®ç›£è¦–è¨­å®š
  ]
}
```

**ãƒ¬ã‚¹ãƒãƒ³ã‚¹**:
```json
{
  "success": true,
  "data": {
    "created": 10,
    "total": 12,
    "targets": [ /* ... */ ],
    "errors": [
      {
        "index": 5,
        "facilityName": "å¤§äº•ãµé ­ä¸­å¤®æµ·æµœå…¬åœ’",
        "error": "duplicate - already exists"
      }
    ]
  }
}
```

##### DELETE /api/monitoring/:id
ç›£è¦–è¨­å®šå‰Šé™¤

##### PATCH /api/monitoring/:id
ç›£è¦–è¨­å®šæ›´æ–°

**ãƒªã‚¯ã‚¨ã‚¹ãƒˆ**:
```json
{
  "status": "paused",
  "timeSlots": ["09:00-11:00", "11:00-13:00"],
  "selectedWeekdays": [1, 2, 3, 4, 5],
  "includeHolidays": false
}
```

#### è¨­å®šAPI

##### GET /api/settings
ãƒ¦ãƒ¼ã‚¶ãƒ¼è¨­å®šå–å¾—

**ãƒ¬ã‚¹ãƒãƒ³ã‚¹**:
```json
{
  "success": true,
  "data": {
    "shinagawa": {
      "username": "12345678",
      "password": "encrypted:..."
    },
    "minato": {
      "username": "user@example.com",
      "password": "encrypted:..."
    },
    "reservationLimits": {
      "perWeek": 5,
      "perMonth": 20
    }
  }
}
```

##### POST /api/settings
ãƒ¦ãƒ¼ã‚¶ãƒ¼è¨­å®šä¿å­˜

**ãƒªã‚¯ã‚¨ã‚¹ãƒˆ**:
```json
{
  "shinagawa": {
    "username": "12345678",
    "password": "mypassword"
  },
  "minato": {
    "username": "user@example.com",
    "password": "mypassword"
  },
  "reservationLimits": {
    "perWeek": 5,
    "perMonth": 20
  }
}
```

#### å±¥æ­´API

##### GET /api/reservations/history
äºˆç´„å±¥æ­´å–å¾—

**ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿**:
- `limit`: å–å¾—ä»¶æ•° (ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: 50)

**ãƒ¬ã‚¹ãƒãƒ³ã‚¹**:
```json
{
  "success": true,
  "data": [
    {
      "id": "uuid",
      "site": "shinagawa",
      "facilityName": "ã—ãªãŒã‚åŒºæ°‘å…¬åœ’ãƒ†ãƒ‹ã‚¹ã‚³ãƒ¼ãƒˆ",
      "date": "2025-12-15",
      "timeSlot": "09:00-11:00",
      "status": "success",
      "message": "äºˆç´„ã«æˆåŠŸã—ã¾ã—ãŸ (äºˆç´„ç•ªå·: 12345)",
      "createdAt": 1701234567890
    }
  ]
}
```

#### æ–½è¨­API

##### GET /api/facilities/shinagawa
å“å·åŒºæ–½è¨­ä¸€è¦§å–å¾—

##### GET /api/facilities/minato
æ¸¯åŒºæ–½è¨­ä¸€è¦§å–å¾—

**ãƒ¬ã‚¹ãƒãƒ³ã‚¹**:
```json
{
  "success": true,
  "data": [
    {
      "facilityId": "1010100201",
      "facilityName": "ã—ãªãŒã‚åŒºæ°‘å…¬åœ’ãƒ†ãƒ‹ã‚¹ã‚³ãƒ¼ãƒˆ",
      "category": "ãƒ†ãƒ‹ã‚¹ã‚³ãƒ¼ãƒˆ",
      "isTennisCourt": true
    }
  ]
}
```

#### ãã®ä»–API

##### GET /api/reservation-period?site={site}
äºˆç´„å¯èƒ½æœŸé–“å–å¾—

**ãƒ¬ã‚¹ãƒãƒ³ã‚¹**:
```json
{
  "success": true,
  "data": {
    "maxDaysAhead": 30,
    "source": "html_extraction",
    "detectedAt": 1701234567890,
    "expiresAt": 1701320967890
  }
}
```

##### GET /api/health
ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯

##### GET /api/metrics/kv
KVãƒ¡ãƒˆãƒªã‚¯ã‚¹å–å¾—

---

## ğŸ”§ æœ€é©åŒ–ãƒ»ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹

### KVæœ€é©åŒ– (Phase 1.5)

#### é…åˆ—ç®¡ç†ã¸ã®ç§»è¡Œ

**å¾“æ¥ã®å•é¡Œ**:
```typescript
// éåŠ¹ç‡: list()æ“ä½œã§å…¨ä»¶ã‚¹ã‚­ãƒ£ãƒ³
const { keys } = await kv.list({ prefix: 'monitoring:target:' });
// 1000ä»¶ã®ç›£è¦–è¨­å®š â†’ 1000å›ã®list() + 1000å›ã®get()
```

**æœ€é©åŒ–å¾Œ**:
```typescript
// åŠ¹ç‡çš„: ãƒ¦ãƒ¼ã‚¶ãƒ¼å˜ä½ã§é…åˆ—ç®¡ç†
const state = await kv.get(`MONITORING:${userId}`, 'json');
// 1å›ã®get()ã§å…¨ç›£è¦–è¨­å®šã‚’å–å¾—
```

**å‰Šæ¸›åŠ¹æœ**:
- KVèª­ã¿å–ã‚Š: **51%å‰Šæ¸›**
- KVæ›¸ãè¾¼ã¿: **87%å‰Šæ¸›**

#### ãƒ¡ãƒ¢ãƒªã‚­ãƒ£ãƒƒã‚·ãƒ¥

```typescript
// ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚­ãƒ£ãƒƒã‚·ãƒ¥ (5åˆ†é–“)
const sessionCache = new Map<string, SessionCacheEntry>();
const SESSION_CACHE_TTL = 5 * 60 * 1000;

// ç›£è¦–ãƒªã‚¹ãƒˆã‚­ãƒ£ãƒƒã‚·ãƒ¥ (3åˆ†é–“)
const monitoringListCache: MonitoringListCache = {
  data: null,
  expires: 0
};
const MONITORING_LIST_CACHE_TTL = 3 * 60 * 1000;
```

**åŠ¹æœ**:
- KVã‚¢ã‚¯ã‚»ã‚¹å‰Šæ¸›
- ãƒ¬ã‚¹ãƒãƒ³ã‚¹é€Ÿåº¦å‘ä¸Š
- Workers CPUæ™‚é–“å‰Šæ¸›

#### å·®åˆ†æ›´æ–°

```typescript
// ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹å¤‰æ›´æ™‚ã®ã¿KVæ›¸ãè¾¼ã¿
if (previousStatus !== newStatus) {
  await kv.put(key, JSON.stringify(target));
} else {
  console.log('[Optimized Skip] No change, write skipped');
}
```

### ã‚µãƒ–ãƒªã‚¯ã‚¨ã‚¹ãƒˆç®¡ç†

**æœ‰æ–™ãƒ—ãƒ©ãƒ³åˆ¶é™**: 1,000ãƒªã‚¯ã‚¨ã‚¹ãƒˆ/å®Ÿè¡Œ

**ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼**:
```typescript
let subrequestCount = 0;

globalThis.fetch = async (...args) => {
  subrequestCount++;
  return originalFetch(...args);
};
```

**ãƒ­ã‚°å‡ºåŠ›**:
```
ğŸ“Š [Subrequest Metrics]
   Total: 450/1000
   âœ… æœ‰æ–™ãƒ—ãƒ©ãƒ³åˆ¶é™å†…: æ®‹ã‚Š550ãƒªã‚¯ã‚¨ã‚¹ãƒˆ
```

### ä¸¦åˆ—å‡¦ç†

```typescript
// å…¨ã‚¿ãƒ¼ã‚²ãƒƒãƒˆã‚’ä¸¦åˆ—ã§ãƒã‚§ãƒƒã‚¯
await Promise.all(
  targets.map(target => 
    checkAndNotify(target, env).catch(error => {
      console.error(`Error: ${error}`);
    })
  )
);
```

**ãƒ¡ãƒªãƒƒãƒˆ**:
- å®Ÿè¡Œæ™‚é–“ã®çŸ­ç¸®
- é›†ä¸­ç›£è¦–ä¸­ã‚‚ä»–ã®ã‚¿ãƒ¼ã‚²ãƒƒãƒˆãŒåœæ­¢ã—ãªã„
- ãƒªã‚½ãƒ¼ã‚¹ã®åŠ¹ç‡çš„ãªåˆ©ç”¨

---

## ğŸ” ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å¯¾ç­–

### ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ç®¡ç†

#### ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ (JWTç”¨)
```typescript
// ãƒãƒƒã‚·ãƒ¥åŒ– (bcryptç›¸å½“)
const hashedPassword = await hashPassword(password);

// æ¤œè¨¼
const isValid = await verifyPassword(password, hashedPassword);
```

#### è‡ªæ²»ä½“ã‚µã‚¤ãƒˆãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰
```typescript
// AESæš—å·åŒ–
const encryptedPassword = await encryptPassword(password, ENCRYPTION_KEY);

// å¾©å·åŒ– (ä½¿ç”¨æ™‚ã®ã¿)
const decryptedPassword = await decryptPassword(encryptedPassword, ENCRYPTION_KEY);
```

### JWTèªè¨¼

**ç½²åã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ **: HS256

**ãƒšã‚¤ãƒ­ãƒ¼ãƒ‰**:
```typescript
{
  userId: string;
  email: string;
  role: 'user' | 'admin';
  exp: number;  // æœ‰åŠ¹æœŸé™ (7æ—¥é–“)
}
```

**æ¤œè¨¼**:
```typescript
const payload = await verifyJWT(token, JWT_SECRET);
if (payload.exp < Date.now()) {
  throw new Error('Token expired');
}
```

### CORSè¨­å®š

```typescript
const corsHeaders = {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Methods': 'GET, POST, PUT, DELETE, OPTIONS',
  'Access-Control-Allow-Headers': 'Content-Type, Authorization',
};
```

---

## ğŸ“± PWAæ©Ÿèƒ½

### Service Worker

**ãƒ•ã‚¡ã‚¤ãƒ«**: `/public/service-worker.js`

**æ©Ÿèƒ½**:
- ã‚ªãƒ•ãƒ©ã‚¤ãƒ³å¯¾å¿œ
- ãƒ—ãƒƒã‚·ãƒ¥é€šçŸ¥å—ä¿¡
- ã‚­ãƒ£ãƒƒã‚·ãƒ¥ç®¡ç†

### Manifest

**ãƒ•ã‚¡ã‚¤ãƒ«**: `/public/manifest.json`

```json
{
  "name": "ãƒ†ãƒ‹ã‚¹ã‚³ãƒ¼ãƒˆäºˆç´„",
  "short_name": "äºˆç´„",
  "start_url": "/dashboard",
  "display": "standalone",
  "background_color": "#ffffff",
  "theme_color": "#3b82f6",
  "icons": [
    {
      "src": "/icons/icon-192x192.png",
      "sizes": "192x192",
      "type": "image/png"
    },
    {
      "src": "/icons/icon-512x512.png",
      "sizes": "512x512",
      "type": "image/png"
    }
  ]
}
```

### ãƒ—ãƒƒã‚·ãƒ¥é€šçŸ¥

**VAPID Keys**: ç’°å¢ƒå¤‰æ•°ã§ç®¡ç†

**è³¼èª­å‡¦ç†**:
```typescript
// ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰
const subscription = await registration.pushManager.subscribe({
  userVisibleOnly: true,
  applicationServerKey: VAPID_PUBLIC_KEY
});

// ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã«ä¿å­˜
await apiClient.subscribePush(subscription);
```

**é€šçŸ¥é€ä¿¡**:
```typescript
await sendPushNotification(userId, {
  title: "ç©ºãæ æ¤œçŸ¥",
  body: "ã—ãªãŒã‚åŒºæ°‘å…¬åœ’ãƒ†ãƒ‹ã‚¹ã‚³ãƒ¼ãƒˆ 12/15 09:00-11:00"
}, env);
```

---

## ğŸš€ ãƒ‡ãƒ—ãƒ­ã‚¤æ‰‹é †

### å‰ææ¡ä»¶

- Node.js 18ä»¥ä¸Š
- npm ã¾ãŸã¯ yarn
- Cloudflare ã‚¢ã‚«ã‚¦ãƒ³ãƒˆ (Workers/KV)
- Vercel ã‚¢ã‚«ã‚¦ãƒ³ãƒˆ (PWA)

### 1. Workers ãƒ‡ãƒ—ãƒ­ã‚¤

```bash
cd workers
npm install

# Cloudflareã«ãƒ­ã‚°ã‚¤ãƒ³
npx wrangler login

# KV Namespaceä½œæˆ (åˆå›ã®ã¿)
npx wrangler kv:namespace create USERS
npx wrangler kv:namespace create SESSIONS
npx wrangler kv:namespace create MONITORING
npx wrangler kv:namespace create RESERVATIONS

# wrangler.tomlã«Namespace IDã‚’è¨­å®š

# æœ¬ç•ªç’°å¢ƒãƒ‡ãƒ—ãƒ­ã‚¤
npm run deploy

# é–‹ç™ºç’°å¢ƒãƒ‡ãƒ—ãƒ­ã‚¤
npm run deploy:dev
```

### 2. PWA ãƒ‡ãƒ—ãƒ­ã‚¤ (Vercel)

```bash
cd pwa
npm install

# ç’°å¢ƒå¤‰æ•°è¨­å®š (.env.local)
NEXT_PUBLIC_API_URL=https://tennis-yoyaku-api.kanda02-1203.workers.dev

# ãƒ“ãƒ«ãƒ‰
npm run build

# Vercelãƒ‡ãƒ—ãƒ­ã‚¤
npx vercel --prod
```

### 3. ç’°å¢ƒå¤‰æ•°è¨­å®š

#### Workers (wrangler.toml)

```toml
[vars]
ENVIRONMENT = "production"
JWT_SECRET = "your-strong-jwt-secret-here"
ADMIN_KEY = "tennis_admin_2025"
VAPID_PUBLIC_KEY = "your-vapid-public-key"
VAPID_PRIVATE_KEY = "your-vapid-private-key"
VAPID_SUBJECT = "mailto:your-email@example.com"

# ENCRYPTION_KEYã¯wrangler secretã§è¨­å®š
```

**æ©Ÿå¯†æƒ…å ±ã®è¨­å®š**:
```bash
# æš—å·åŒ–ã‚­ãƒ¼ã‚’ç”Ÿæˆ
node workers/generate-encryption-key.ts

# Secretã¨ã—ã¦ä¿å­˜
npx wrangler secret put ENCRYPTION_KEY
# â†’ ç”Ÿæˆã•ã‚ŒãŸã‚­ãƒ¼ã‚’ãƒšãƒ¼ã‚¹ãƒˆ
```

#### PWA (Vercelç’°å¢ƒå¤‰æ•°)

Vercelãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã§è¨­å®š:
- `NEXT_PUBLIC_API_URL`: Workers APIã®URL

---

## ğŸ“Š ç›£è¦–ãƒ»ãƒ¡ãƒˆãƒªã‚¯ã‚¹

### ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ­ã‚°

```bash
# Workersãƒ­ã‚°ã‚’ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ è¡¨ç¤º
npx wrangler tail tennis-yoyaku-api --format pretty

# ç‰¹å®šã®ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã§ãƒ•ã‚£ãƒ«ã‚¿
npx wrangler tail tennis-yoyaku-api --format pretty 2>&1 | grep "æ¤œçŸ¥"
```

### KVãƒ¡ãƒˆãƒªã‚¯ã‚¹

```bash
# APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã§ç¢ºèª
curl https://tennis-yoyaku-api.kanda02-1203.workers.dev/api/metrics/kv
```

**ãƒ¬ã‚¹ãƒãƒ³ã‚¹ä¾‹**:
```json
{
  "reads": 120,
  "writes": 15,
  "cacheHits": 80,
  "cacheMisses": 40,
  "writesSkipped": 95,
  "cacheHitRate": 0.67,
  "writeSkipRate": 0.86,
  "elapsedMinutes": 45.2
}
```

### KVãƒ‡ãƒ¼ã‚¿ç¢ºèª

```bash
# ãƒ¦ãƒ¼ã‚¶ãƒ¼è¨­å®šç¢ºèª
npx wrangler kv:key get "settings:USER_ID" --namespace-id=NAMESPACE_ID

# ç›£è¦–è¨­å®šç¢ºèª
npx wrangler kv:key get "MONITORING:USER_ID" --namespace-id=NAMESPACE_ID

# äºˆç´„å±¥æ­´ç¢ºèª
npx wrangler kv:key get "history:USER_ID" --namespace-id=NAMESPACE_ID
```

---

## ğŸ› ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### ã‚ˆãã‚ã‚‹å•é¡Œ

#### 1. ãƒ­ã‚°ã‚¤ãƒ³ã§ããªã„

**ç—‡çŠ¶**: è¨­å®šç”»é¢ã§èªè¨¼æƒ…å ±ã‚’ä¿å­˜ã—ãŸãŒã€ç›£è¦–ãŒå‹•ä½œã—ãªã„

**åŸå› **:
- ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãŒé–“é•ã£ã¦ã„ã‚‹
- ã‚»ãƒƒã‚·ãƒ§ãƒ³ãŒæœŸé™åˆ‡ã‚Œ

**å¯¾å‡¦æ³•**:
```bash
# ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚’ã‚¯ãƒªã‚¢
npx wrangler kv:key delete "session:USER_ID:shinagawa" --namespace-id=SESSIONS_ID
npx wrangler kv:key delete "session:USER_ID:minato" --namespace-id=SESSIONS_ID

# è¨­å®šç”»é¢ã§èªè¨¼æƒ…å ±ã‚’å†å…¥åŠ›
```

#### 2. äºˆç´„ãŒå¤±æ•—ã™ã‚‹

**ç—‡çŠ¶**: ç©ºãæ ã‚’æ¤œçŸ¥ã—ãŸãŒäºˆç´„ã«å¤±æ•—ã™ã‚‹

**åŸå› **:
- ä»–ã®äººãŒå…ˆã«äºˆç´„ã—ãŸ
- ã‚»ãƒƒã‚·ãƒ§ãƒ³ãŒç„¡åŠ¹
- äºˆç´„å¯èƒ½æœŸé–“å¤–

**ãƒ­ã‚°ç¢ºèª**:
```bash
npx wrangler tail tennis-yoyaku-api --format pretty 2>&1 | grep "äºˆç´„"
```

#### 3. ç›£è¦–ãŒå‹•ä½œã—ãªã„

**ç—‡çŠ¶**: CronãŒå®Ÿè¡Œã•ã‚Œã¦ã„ã‚‹ãŒç›£è¦–ã•ã‚Œãªã„

**ç¢ºèªäº‹é …**:
1. ç›£è¦–è¨­å®šãŒ`active`çŠ¶æ…‹ã‹
2. æ—¥ä»˜ç¯„å›²ãŒæ­£ã—ã„ã‹
3. æ›œæ—¥ãƒ•ã‚£ãƒ«ã‚¿ãŒé©åˆ‡ã‹

**KVç¢ºèª**:
```bash
npx wrangler kv:key get "MONITORING:USER_ID" --namespace-id=MONITORING_ID | jq
```

#### 4. KVæ›¸ãè¾¼ã¿åˆ¶é™ã‚¨ãƒ©ãƒ¼

**ç—‡çŠ¶**: `KV write limit exceeded` ã‚¨ãƒ©ãƒ¼

**åŸå› **: KVæ›¸ãè¾¼ã¿å›æ•°ã®ä¸Šé™åˆ°é” (æœ‰æ–™ãƒ—ãƒ©ãƒ³ã§ã¯ç„¡åˆ¶é™ã®ã¯ãš)

**å¯¾å‡¦æ³•**:
1. æœ‰æ–™ãƒ—ãƒ©ãƒ³ã«ãªã£ã¦ã„ã‚‹ã‹ç¢ºèª
2. ä¸è¦ãªwriteæ“ä½œãŒãªã„ã‹ç¢ºèª
3. ãƒ¡ãƒ¢ãƒªã‚­ãƒ£ãƒƒã‚·ãƒ¥ãŒæ©Ÿèƒ½ã—ã¦ã„ã‚‹ã‹ç¢ºèª

### ãƒ‡ãƒãƒƒã‚°ã‚³ãƒãƒ³ãƒ‰

```bash
# å…¨ç›£è¦–è¨­å®šã‚’ç¢ºèª
npx wrangler kv:key list --prefix="MONITORING:" --namespace-id=MONITORING_ID

# ç‰¹å®šãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ç›£è¦–è¨­å®šã‚’ç¢ºèª
npx wrangler kv:key get "MONITORING:USER_ID" --namespace-id=MONITORING_ID | jq '.targets[] | {facilityName, status, dateMode, timeSlots}'

# äºˆç´„å¯èƒ½æœŸé–“ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’ç¢ºèª
npx wrangler kv:key get "reservation_period:shinagawa" --namespace-id=MONITORING_ID
npx wrangler kv:key get "reservation_period:minato" --namespace-id=MONITORING_ID

# ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’ã‚¯ãƒªã‚¢
npx wrangler kv:key delete "reservation_period:shinagawa" --namespace-id=MONITORING_ID
npx wrangler kv:key delete "reservation_period:minato" --namespace-id=MONITORING_ID
```

---

## ğŸ“ åˆ¶é™äº‹é …ãƒ»æ—¢çŸ¥ã®å•é¡Œ

### ã‚·ã‚¹ãƒ†ãƒ åˆ¶é™

1. **å“å·åŒºã®æ·±å¤œæ™‚é–“å¸¯åˆ¶é™**
   - 00:00-03:15: ãƒ­ã‚°ã‚¤ãƒ³ä¸å¯
   - 03:15-05:00: äºˆç´„ä¸å¯

2. **äºˆç´„å¯èƒ½æœŸé–“**
   - å“å·åŒº: 30æ—¥å…ˆã¾ã§
   - æ¸¯åŒº: 60æ—¥å…ˆã¾ã§
   - å¤‰æ›´ã•ã‚Œã‚‹å¯èƒ½æ€§ã‚ã‚Š (è‡ªå‹•æ¤œå‡ºã§å¯¾å¿œ)

3. **Cloudflare Workersåˆ¶é™** (æœ‰æ–™ãƒ—ãƒ©ãƒ³)
   - ã‚µãƒ–ãƒªã‚¯ã‚¨ã‚¹ãƒˆ: 1,000/å®Ÿè¡Œ
   - CPUæ™‚é–“: 30ç§’/å®Ÿè¡Œ
   - KVæ›¸ãè¾¼ã¿: ç„¡åˆ¶é™

### æ—¢çŸ¥ã®å•é¡Œ

1. **æ–½è¨­ãƒªã‚¹ãƒˆã®ãƒãƒ¼ãƒ‰ã‚³ãƒ¼ãƒ‰**
   - ç¾åœ¨ã¯å›ºå®šãƒ‡ãƒ¼ã‚¿ã‚’ä½¿ç”¨
   - å°†æ¥çš„ã«å‹•çš„å–å¾—ã¸ã®ç§»è¡ŒãŒå¿…è¦

2. **ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†**
   - å“å·åŒºã¯03:15ã«å¼·åˆ¶ãƒªã‚»ãƒƒãƒˆ
   - æ¸¯åŒºã¯24æ™‚é–“ã§ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆ

3. **ä¸¦è¡Œäºˆç´„ã®ç«¶åˆ**
   - è¤‡æ•°ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒåŒã˜æ ã‚’ç‹™ã†å ´åˆã€å…ˆç€é †
   - ã‚·ã‚¹ãƒ†ãƒ å´ã§åˆ¶å¾¡ä¸å¯

---

## ğŸ”® ä»Šå¾Œã®æ”¹å–„äºˆå®š

### Phase 2.0 (è¨ˆç”»ä¸­)

- [ ] æ–½è¨­ãƒªã‚¹ãƒˆã®å‹•çš„å–å¾—
- [ ] ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ é€šçŸ¥ã®å¼·åŒ–
- [ ] ç›£è¦–çŠ¶æ³ã®å¯è¦–åŒ–ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰
- [ ] äºˆç´„æˆåŠŸç‡ã®åˆ†æãƒ¬ãƒãƒ¼ãƒˆ
- [ ] ç›£è¦–ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆæ©Ÿèƒ½
- [ ] ãƒ¢ãƒã‚¤ãƒ«ã‚¢ãƒ—ãƒªæœ€é©åŒ–

### Phase 3.0 (æ§‹æƒ³)

- [ ] AWS Lambdaé›†ä¸­ç›£è¦– (10ç§’é–“éš”)
- [ ] æ©Ÿæ¢°å­¦ç¿’ã«ã‚ˆã‚‹äºˆç´„æˆåŠŸç‡äºˆæ¸¬
- [ ] è¤‡æ•°ãƒ¦ãƒ¼ã‚¶ãƒ¼é–“ã®å”èª¿äºˆç´„
- [ ] LINEé€šçŸ¥å¯¾å¿œ

---

## ğŸ“š é–¢é€£ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

- **[README.md](./README.md)** - ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦
- **[CLIENT_MANUAL.md](./CLIENT_MANUAL.md)** - ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå‘ã‘ãƒãƒ‹ãƒ¥ã‚¢ãƒ«
- **[SYSTEM_OVERVIEW.md](./SYSTEM_OVERVIEW.md)** - ã‚·ã‚¹ãƒ†ãƒ æ¦‚è¦
- **[RELEASE_NOTES.md](./RELEASE_NOTES.md)** - ãƒªãƒªãƒ¼ã‚¹ãƒãƒ¼ãƒˆ
- **[OPERATIONS_TASKS.md](./OPERATIONS_TASKS.md)** - é‹ç”¨ã‚¿ã‚¹ã‚¯

---

## ğŸ‘¤ é–‹ç™ºè€…æƒ…å ±

**é–‹ç™ºè€…**: youshi-kanda  
**GitHub**: [@youshi-kanda](https://github.com/youshi-kanda)  
**ãƒªãƒã‚¸ãƒˆãƒª**: [tennis_yoyaku](https://github.com/youshi-kanda/tennis_yoyaku)

---

## ğŸ“„ ãƒ©ã‚¤ã‚»ãƒ³ã‚¹

MIT License

---

**æœ€çµ‚æ›´æ–°**: 2025å¹´12æœˆ1æ—¥  
**ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: v1.1  
**ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆä½œæˆè€…**: GitHub Copilot (Claude Sonnet 4.5)
