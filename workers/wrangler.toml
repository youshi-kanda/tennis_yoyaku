name = "tennis-yoyaku-api"
main = "src/index.ts"
compatibility_date = "2024-11-20"

# ===== Production Environment =====
# KV Namespaces (Production)
[[kv_namespaces]]
binding = "USERS"
id = "2bb51589e95d448abc4f6821a5898865"

[[kv_namespaces]]
binding = "SESSIONS"
id = "2111997ed58e4f5080074fc0a95cacf0"

[[kv_namespaces]]
binding = "MONITORING"
id = "5a8f67abf49546b58f6113e18a5b2443"

[[kv_namespaces]]
binding = "RESERVATIONS"
id = "6e26433ee30b4ad0bc0a8749a67038be"

# Cron Triggers
# 通常監視: 1分間隔（キャンセル枠の取りこぼし削減）
# 5:00一斉処理: 毎日5:00に実行（深夜待機枠を一斉予約）
# 集中監視: 未実装（品川区「取→○」機能）
[triggers]
crons = ["*/1 * * * *", "0 5 * * *"]  # 1分間隔 + 5:00一斉処理

# Environment variables (Production)
[vars]
ENVIRONMENT = "production"
JWT_SECRET = "prod_jwt_secret_8f9a3b2c1d4e5f6g7h8i9j0k1l2m3n4o5p6q7r8s9t0u1v2w3x4y5z"
ADMIN_KEY = "tennis_admin_2025"
VAPID_PUBLIC_KEY = "BJl4G42CTnBBIz0YBhm2yZSPEgyNjXjBnjEXZwT1g0hCiHIGYesl8ePExqj9zcl7kBqRqug9rvg9qLTEtC1KjyQ"
VAPID_PRIVATE_KEY = "M3GGZhN2hN2Df1GlKD8cLBQGqU3JBdVW4whF7hb_aTI"
VAPID_SUBJECT = "mailto:youshi.kanda@gmail.com"
MAINTENANCE_MODE = "false"  # メンテナンスモード: true=有効, false=無効
MAINTENANCE_MESSAGE = "システムメンテナンス中です。しばらくお待ちください。"

# ===== Development Environment =====
[env.development]
name = "tennis-yoyaku-api-dev"

# KV Namespaces (Development)
[[env.development.kv_namespaces]]
binding = "USERS"
id = "c0d3c217a6544bcabe55d2a489d35158"

[[env.development.kv_namespaces]]
binding = "SESSIONS"
id = "940200cc91dc45af854bde2ff274ea94"

[[env.development.kv_namespaces]]
binding = "MONITORING"
id = "29eca291199b4570a451fe20775f11ee"

[[env.development.kv_namespaces]]
binding = "RESERVATIONS"
id = "272a3a9914bd407e9389ca2d8ef907db"

# Cron Triggers (Development) - 本番と同じ設定
[env.development.triggers]
crons = ["*/1 * * * *", "0 5 * * *"]

# Environment variables (Development)
[env.development.vars]
ENVIRONMENT = "development"
JWT_SECRET = "dev-jwt-secret-for-testing-only"
ADMIN_KEY = "tennis_admin_2025"
VAPID_PUBLIC_KEY = "BJl4G42CTnBBIz0YBhm2yZSPEgyNjXjBnjEXZwT1g0hCiHIGYesl8ePExqj9zcl7kBqRqug9rvg9qLTEtC1KjyQ"
VAPID_PRIVATE_KEY = "M3GGZhN2hN2Df1GlKD8cLBQGqU3JBdVW4whF7hb_aTI"
VAPID_SUBJECT = "mailto:youshi.kanda+dev@gmail.com"
