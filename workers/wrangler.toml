name = "tennis-yoyaku-api"
main = "src/index.ts"
compatibility_date = "2024-11-20"

# ===== Production Environment =====
# KV Namespaces (Production)
[[kv_namespaces]]
binding = "USERS"
id = "2bb51589e95d448abc4f6821a5898865"

[[kv_namespaces]]
binding = "SESSIONS"
id = "2111997ed58e4f5080074fc0a95cacf0"

[[kv_namespaces]]
binding = "MONITORING"
id = "5a8f67abf49546b58f6113e18a5b2443"

[[kv_namespaces]]
binding = "RESERVATIONS"
id = "6e26433ee30b4ad0bc0a8749a67038be"

# Cron Triggers (フェーズ1: 無料プラン案A - 1分間隔)
# 通常監視: 1分間隔
# 集中監視: 10分刻み(10:10, 10:20...)前後2分間は自動的に高頻度チェック
[triggers]
crons = ["*/1 * * * *"]

# Environment variables (Production)
[vars]
ENVIRONMENT = "production"
JWT_SECRET = "your-jwt-secret-here-change-in-production"
ADMIN_KEY = "tennis_admin_2025"
VAPID_PUBLIC_KEY = "BJl4G42CTnBBIz0YBhm2yZSPEgyNjXjBnjEXZwT1g0hCiHIGYesl8ePExqj9zcl7kBqRqug9rvg9qLTEtC1KjyQ"
VAPID_PRIVATE_KEY = "M3GGZhN2hN2Df1GlKD8cLBQGqU3JBdVW4whF7hb_aTI"
VAPID_SUBJECT = "mailto:youshi.kanda@example.com"

# ===== Development Environment =====
[env.development]
name = "tennis-yoyaku-api-dev"

# KV Namespaces (Development)
[[env.development.kv_namespaces]]
binding = "USERS"
id = "c0d3c217a6544bcabe55d2a489d35158"

[[env.development.kv_namespaces]]
binding = "SESSIONS"
id = "940200cc91dc45af854bde2ff274ea94"

[[env.development.kv_namespaces]]
binding = "MONITORING"
id = "29eca291199b4570a451fe20775f11ee"

[[env.development.kv_namespaces]]
binding = "RESERVATIONS"
id = "272a3a9914bd407e9389ca2d8ef907db"

# Cron Triggers (Development) - 本番と同じ設定
[env.development.triggers]
crons = ["*/1 * * * *"]

# Environment variables (Development)
[env.development.vars]
ENVIRONMENT = "development"
JWT_SECRET = "dev-jwt-secret-for-testing-only"
ADMIN_KEY = "tennis_admin_2025"
VAPID_PUBLIC_KEY = "BJl4G42CTnBBIz0YBhm2yZSPEgyNjXjBnjEXZwT1g0hCiHIGYesl8ePExqj9zcl7kBqRqug9rvg9qLTEtC1KjyQ"
VAPID_PRIVATE_KEY = "M3GGZhN2hN2Df1GlKD8cLBQGqU3JBdVW4whF7hb_aTI"
VAPID_SUBJECT = "mailto:youshi.kanda+dev@example.com"
